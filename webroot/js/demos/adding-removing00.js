'use strict';var Shuffle=window.Shuffle;var reverseToggleDifficulty=false;var reverseToggleSize=false;var reverseToggleProgress=false;var reverseToggleDate=false;var Demo=function(element){this.element=element;this.initShuffle();this.setupEvents();};Demo.prototype.initShuffle=function(){this.shuffle=new Shuffle(this.element,{itemSelector:'.box',speed:800,easing:'ease',columnWidth:function(containerWidth){return 0.315*containerWidth;},gutterWidth:function(containerWidth){return 0.025*containerWidth;},});reverseToggleDate=false;reverseToggleProgress=false;reverseToggleSize=false;reverseToggleDifficulty=false;};Demo.prototype.setupEvents=function(){document.querySelector('#append').addEventListener('click',this.onAppendBoxes.bind(this));document.querySelector('#prepend').addEventListener('click',this.onPrependBoxes.bind(this));document.querySelector('#randomize').addEventListener('click',this.onRandomize.bind(this));document.querySelector('#remove').addEventListener('click',this.onRemoveClick.bind(this));document.querySelector('#sorter').addEventListener('click',this.onSortChange.bind(this));document.querySelector('#filterer').addEventListener('change',this.onFilterChange.bind(this));this.shuffle.element.addEventListener('click',this.onContainerClick.bind(this));this.shuffle.on(Shuffle.EventType.REMOVED,function(data){console.log(data);});};Demo.prototype._generateBoxes=function(itemsToCreate){var items=[];var modifierClasses=['w2','h2','w3'];var i=0;for(i=0;i<itemsToCreate;i++){var random=Math.random();var box=document.createElement('div');box.className='box';box.style.backgroundColor=this.getRandomColor();box.setAttribute('data-reviews',this.getRandomInt(1,150));if(random>0.8){var randomClass=Math.floor(Math.random()*3);box.className=box.className+' '+modifierClasses[randomClass];}
items.push(box);}
return items;};Demo.prototype._getArrayOfElementsToAdd=function(){return this._generateBoxes(5);};Demo.prototype._getHtmlMarkupToAdd=function(){var fragment=document.createDocumentFragment();this._generateBoxes(5).forEach(function(item){fragment.appendChild(item);});var dummy=document.createElement('div');dummy.appendChild(fragment);return dummy.innerHTML;};Demo.prototype.onAppendBoxes=function(){var elements=this._getArrayOfElementsToAdd();elements.forEach(function(element){this.shuffle.element.appendChild(element);},this);this.shuffle.add(elements);};Demo.prototype.onPrependBoxes=function(){var markup=this._getHtmlMarkupToAdd();this.element.insertAdjacentHTML('afterbegin',markup);var items=Array.prototype.slice.call(this.element.children,0,5);this.shuffle.add(items);};Demo.prototype.getRandomInt=function(min,max){return Math.floor(Math.random()*(max-min+1))+min;};Demo.prototype.getRandomColor=function(){return'#'+Math.random().toString(16).slice(2,8);};Demo.prototype.onRemoveClick=function(){var total=this.shuffle.visibleItems;if(!total){return;}
var numberToRemove=Math.min(3,total);var indiciesToRemove=[];for(var i=0;i<numberToRemove;i++){indiciesToRemove.push(this.getRandomInt(0,total-1));}
var collection=indiciesToRemove.map(function(index){return this.shuffle.items[index].element;},this);this.shuffle.remove(collection);};Demo.prototype.onRandomize=function(){var label=document.getElementById('sorter').querySelector('label.btn.active');if(label){var radio=label.querySelector('input');radio.checked=false;label.classList.remove('active');}
this.sortBy('random');};Demo.prototype.toggleActiveClasses=function(event){var buttons=Array.from(event.currentTarget.children);buttons.forEach(function(button){if(button.querySelector('input').value===event.target.value){button.classList.add('active');}else{button.classList.remove('active');}});}
Demo.prototype.onSortChange=function(evt){this.toggleActiveClasses(evt);this.sortBy(evt.target.value);};Demo.prototype.sortBy=function(value){var sortOptions;if(value==='most-reviews'){if(reverseToggleDate){sortOptions={by:this.getReviews,};}else{sortOptions={reverse:true,by:this.getReviews,};}
reverseToggleDate=!reverseToggleDate;}else if(value==='most-problems'){if(reverseToggleSize){sortOptions={by:this.getProblems,};}else{sortOptions={reverse:true,by:this.getProblems,};}
reverseToggleSize=!reverseToggleSize;}else if(value==='most-difficulty'){if(reverseToggleDifficulty){sortOptions={reverse:true,by:this.getDifficulty,};}else{sortOptions={by:this.getDifficulty,};}
reverseToggleDifficulty=!reverseToggleDifficulty;}else if(value==='most-solved'){if(reverseToggleProgress){sortOptions={by:this.getSolved,};}else{sortOptions={reverse:true,by:this.getSolved,};}
reverseToggleProgress=!reverseToggleProgress;}else if(value==='random'){sortOptions={randomize:true};}else{sortOptions={};}
this.shuffle.sort(sortOptions);};Demo.prototype.getReviews=function(element){return parseInt(element.getAttribute('data-reviews'),10);}
Demo.prototype.getProblems=function(element){return parseInt(element.getAttribute('data-problems'),10);}
Demo.prototype.getDifficulty=function(element){return parseInt(element.getAttribute('data-difficulty'),10);}
Demo.prototype.getSolved=function(element){return parseInt(element.getAttribute('data-solved'),10);}
Demo.prototype.onFilterChange=function(event){this.toggleActiveClasses(event);this.filterBy(event.target.value);};Demo.prototype.filterBy=function(value){var filterBy;var _this=this;if(value==='none'){filterBy=Shuffle.ALL_ITEMS;}else if(value==='odd-reviews'){filterBy=function(element){return _this.getReviews(element)%2===1;};}else{filterBy=function(element){return _this.getReviews(element)%2===0;};}
this.shuffle.filter(filterBy);};Demo.prototype.onContainerClick=function(event){if(typeof event.target.closest!=='function'){return;}
var element=event.target.closest('.box');if(element!==null){this.shuffle.remove([element]);}};document.addEventListener('DOMContentLoaded',function(){window.demo=new Demo(document.getElementById('my-shuffle'));});